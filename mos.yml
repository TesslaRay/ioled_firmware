mos author: Eduardo Hales/Cristian Valdivia
description: iOLED
version: 2.0
manifest_version: 2018-05-18
libs_version: ${mos.version}
modules_version: ${mos.version}
mongoose_os_version: ${mos.version}

config_schema:
  # Button control
  - [
      "board.btn1.control",
      "s",
      "led1",
      { title: "Name of the led that controls" },
    ]

  # Integrated led config
  - ["board.led1.duty", "d", 0.5, { title: "Integrated Led duty cycle" }]
  - ["board.led1.freq", "i", 500, { title: "Integrated Led frequency" }]
  - ["board.led1.state", "b", true, { title: "Integrated Led current state" }]

  # Prototype led2 config
  - [
      "board.led2.active_high",
      "b",
      true,
      { title: "True if LED is on when output is high (1)" },
    ]
  - ["board.led2.duty", "d", 1.0, { title: "Led duty cycle" }]
  - ["board.led2.freq", "i", 500, { title: "Led frequency" }]
  - ["board.led2.pin", "i", 14, { title: "Led pin for PWM" }]
  - ["board.led2.state", "b", true, { title: "Led current state" }]

  # Neopixel config
  - ["board.neopixel.state", "b", true, { title: "Led current state" }]
  - ["board.neopixel.pin", "i", 13, { title: "Neopixel pin" }]
  - ["board.neopixel.pixels", "i", 3, { title: "Neopixel number of pixels" }]

  # Enable access point
  - ["wifi.ap.enable", "b", true, { title: "Disable Access Point" }]
  - ["wifi.ap.ssid", "s", "esp8266.config", { title: "Access Point Name" }]
  - ["wifi.ap.pass", "s", "", { title: "Access Point Password" }]
  # OTA URL
  - ["Update", "o", { title: "Firmware updater" }]
  - [
      "Update.timeout",
      "i",
      60000,
      {
        title: "Update will be aborted if it does not finish within this time",
      },
    ]

  # Timer
  - ["board.timer.timerOn", "s", "00:00", { title: "Turn on time" }]
  - ["board.timer.timerOff", "s", "00:00", { title: "Turn off time" }]
  - ["board.timer.timerState", "b", false, { title: "Timer state" }]

  # Time zone
  - ["sys.tz_spec", "s", "CLST3", { title: "CHile Summer Timer" }]

  # I2C
  - ["i2c.enable", true]
  - ["i2c.sda_gpio", 5]
  - ["i2c.scl_gpio", 4]

  # Config for mDash
  - ["dash.enable", "b", false, { "title": "Enable" }]
  - ["dash.token", "s", "", { "title": "Access token" }]
  - [
      "dash.server",
      "s",
      "wss://mdash.net/api/v2/rpc",
      { "title": "Server address" },
    ]
  - [
      "dash.ssl_cert",
      "s",
      "",
      { title: "Client certificate to present to the server" },
    ]
  - [
      "dash.ssl_key",
      "s",
      "",
      { title: "Private key corresponding to the certificate" },
    ]
  - [
      "dash.ssl_ca_cert",
      "s",
      "ca.pem",
      { "title": "Verify server certificate using this CA bundle" },
    ]
  - ["dash.send_logs", "b", false, { "title": "Send logs" }]

tags:
  - js

filesystem:
  - fs

# ffi_symbols:
#   - mgos_cron_remove

# - origin: https://github.com/mongoose-os-libs/<lib>
libs:
  # boards include wifi lib.
  - origin: https://github.com/mongoose-os-libs/boards
  - origin: https://github.com/mongoose-os-libs/mjs
  - origin: https://github.com/mongoose-os-libs/pwm
  - origin: https://github.com/mongoose-os-libs/rpc-uart
  - origin: https://github.com/mongoose-os-libs/rpc-common
  - origin: https://github.com/mongoose-os-libs/rpc-service-config
  - origin: https://github.com/mongoose-os-libs/rpc-service-fs
  - origin: https://github.com/mongoose-os-libs/rpc-loopback
  - origin: https://github.com/mongoose-os-libs/rpc-service-i2c
  # ota rpc
  - origin: https://github.com/mongoose-os-libs/rpc-service-ota
  # gcp include mqtt and ca-bundle (certificates).
  - origin: https://github.com/mongoose-os-libs/gcp
  # Access point for wifi
  - origin: https://github.com/mongoose-os-libs/wifi-setup-web-ui
  - origin: https://github.com/mongoose-os-libs/http-server
  # Neopixel lib
  - origin: https://github.com/mongoose-os-libs/neopixel
  # CRON
  - origin: https://github.com/mongoose-os-libs/cron
  # I2C
  - origin: https://github.com/mongoose-os-libs/i2c
  # mDash
  - origin: https://github.com/mongoose-os-libs/dash
  - origin: https://github.com/mongoose-os-libs/core
  - origin: https://github.com/mongoose-os-libs/rpc-ws
  - origin: https://github.com/mongoose-os-libs/shadow

sources:
